doctype html

include ./collapsible-section.pug

mixin script()
    script
        block

html
    head
        meta(charset="utf-8")
        meta(http-equiv="X-UA-Compatible", content="IE=Edge")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        block title
            title Eta Server
        block head
        each url in css
            link(href=url, rel="stylesheet", type="text/css")
        if defaultCssExists
            link(href="/css" + mvcPath + ".css", rel="stylesheet", type="text/css")
    body
        block body
        script(src="https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.35.3/es6-shim.min.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/0.20.12/system.js")
        if standaloneJS
            each path in standaloneJS
                script(src=path)
        -
            const map = {
                "autocomplete": "https://crossroads-cdn.s3.amazonaws.com/js/autocomplete.min.js",
                "bootstrap": "https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js",
                "bootstrap-datepicker": "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min.js",
                "bootstrap-datetimepicker": "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js",
                "bootstrap-editable": "https://cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.1/bootstrap3-editable/js/bootstrap-editable.min.js",
                "bootstrap-slider": "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.8.1/bootstrap-slider.min.js",
                "bootstrap-switch": "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.4/js/bootstrap-switch.min.js",
                "chart.js": "https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js",
                "d3-timer": "https://cdnjs.cloudflare.com/ajax/libs/d3-timer/1.0.6/d3-timer.min.js",
                "datatables.net": "https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js",
                "datatables.net-bs": "https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js",
                "datatables.net-buttons": "https://cdn.datatables.net/buttons/1.2.4/js/dataTables.buttons.min.js",
                "datatables.net-buttons-bs": "https://cdn.datatables.net/buttons/1.2.4/js/buttons.bootstrap.min.js ",
                "datatables.net-buttons-html5": "https://cdn.datatables.net/buttons/1.2.2/js/buttons.html5.min.js",
                "datatables.net-buttons-print": "https://cdn.datatables.net/buttons/1.2.2/js/buttons.print.min.js",
                "es6-shim": "https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.35.3/es6-shim.min.js",
                "handlebars": "https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js",
                "jquery": "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js",
                "jquery-ui": "https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js",
                "jquery-mousewheel": "https://cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js",
                "jquery.scrollTo": "https://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.0/jquery.scrollTo.min.js",
                "jquery-visible": "https://cdnjs.cloudflare.com/ajax/libs/jquery-visible/1.2.0/jquery.visible.min.js",
                "katex": "https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js",
                "katex-autorender": "https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js",
                "linq": "https://crossroads-cdn.s3.amazonaws.com/js/linq.min.js",
                "lodash": "https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js",
                "marked": "https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.6/marked.min.js",
                "moment": "https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js",
                "patternomaly": "https://crossroads-cdn.s3.amazonaws.com/js/patternomaly.min.js",
                "please": "https://cdnjs.cloudflare.com/ajax/libs/pleasejs/0.4.2/Please.min.js",
                "select2": "https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js",
                "socket.io-client": "https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"
            };
            if (jsMap) for (const key in jsMap) map[key] = jsMap[key];
            const jsPath = "/js" + mvcPath + ".js";
            const systemJSConfig = {
                baseURL: "/js/", map
            };
        +script()
            | SystemJS.config(!{JSON.stringify(systemJSConfig)});
            | SystemJS.import("jquery").then(function() {
            | SystemJS.import("bootstrap");
            | SystemJS.import("#{jsPath}");
            if js
                each path in js
                    | SystemJS.import("#{path}");
            | });
